<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä¿¡æ¯æ¨¡å—E-Rå›¾</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        .er-container {
            background: linear-gradient(135deg, #a3bded 0%, #6991c7 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .er-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 20px auto;
            max-width: 1200px;
            overflow: hidden;
        }
        .er-header {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .er-content {
            padding: 30px;
            min-height: 600px;
        }
        .entity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .entity-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #74b9ff;
            transition: transform 0.3s ease;
        }
        .entity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="er-container">
    <div class="er-card">
        <div class="er-header">
            <h1 class="text-3xl font-bold mb-2">ä¸ªäººä¿¡æ¯æ¨¡å—E-Rå›¾</h1>
            <p class="text-lg opacity-90">ç”¨æˆ·ä¿¡æ¯ç®¡ç†ã€ç¤¾äº¤å…³ç³»ã€å†…å®¹ç»Ÿè®¡çš„å®ä½“å…³ç³»</p>
        </div>
        
        <div class="er-content">
            <!-- Mermaid E-Rå›¾ -->
            <div class="mermaid">
erDiagram
    %% ç”¨æˆ·æ ¸å¿ƒå®ä½“
    User {
        int id PK "ç”¨æˆ·ID"
        string username "ç”¨æˆ·å"
        string nickname "æ˜µç§°"
        string email "é‚®ç®±"
        string avatar "å¤´åƒ"
        string gender "æ€§åˆ«"
        date birthday "ç”Ÿæ—¥"
        string location "åœ°åŒº"
        string bio "ä¸ªäººç®€ä»‹"
        string interests "å…´è¶£çˆ±å¥½"
        int followers_count "ç²‰ä¸æ•°"
        int following_count "å…³æ³¨æ•°"
        int posts_count "å¸–å­æ•°"
        int likes_count "è·èµæ•°"
        datetime created_at "åˆ›å»ºæ—¶é—´"
    }
    
    %% ç¤¾äº¤å…³ç³»å®ä½“
    UserFollow {
        int id PK "å…³æ³¨ID"
        int follower_id FK "å…³æ³¨è€…ID"
        int following_id FK "è¢«å…³æ³¨è€…ID"
        datetime created_at "å…³æ³¨æ—¶é—´"
    }
    
    %% è´´å§æˆå‘˜å…³ç³»
    TiebaMember {
        int id PK "æˆå‘˜ID"
        int tieba_id FK "è´´å§ID"
        int user_id FK "ç”¨æˆ·ID"
        string role "è§’è‰²"
        int level "ç­‰çº§"
        int experience "ç»éªŒå€¼"
        datetime joined_at "åŠ å…¥æ—¶é—´"
    }
    
    %% è´´å§å…³æ³¨å…³ç³»
    TiebaFollow {
        int id PK "å…³æ³¨ID"
        int user_id FK "ç”¨æˆ·ID"
        int tieba_id FK "è´´å§ID"
        datetime created_at "å…³æ³¨æ—¶é—´"
    }
    
    %% å¸–å­ç»Ÿè®¡å…³ç³»
    Post {
        int id PK "å¸–å­ID"
        int author_id FK "ä½œè€…ID"
        int tieba_id FK "è´´å§ID"
        string title "å¸–å­æ ‡é¢˜"
        string post_type "å¸–å­ç±»å‹"
        int views_count "æµè§ˆæ•°"
        int likes_count "ç‚¹èµæ•°"
        int comments_count "è¯„è®ºæ•°"
        datetime created_at "åˆ›å»ºæ—¶é—´"
    }
    
    %% å…³ç³»å®šä¹‰
    User ||--o{ UserFollow : "å…³æ³¨å…¶ä»–ç”¨æˆ·"
    User ||--o{ UserFollow : "è¢«å…¶ä»–ç”¨æˆ·å…³æ³¨"
    User ||--o{ TiebaMember : "åŠ å…¥è´´å§"
    User ||--o{ TiebaFollow : "å…³æ³¨è´´å§"
    User ||--o{ Post : "å‘å¸ƒå¸–å­"
    
    %% ç»Ÿè®¡å…³ç³»
    User ||--|| User.followers_count : "ç»Ÿè®¡ç²‰ä¸æ•°"
    User ||--|| User.following_count : "ç»Ÿè®¡å…³æ³¨æ•°"
    User ||--|| User.posts_count : "ç»Ÿè®¡å¸–å­æ•°"
    User ||--|| User.likes_count : "ç»Ÿè®¡è·èµæ•°"
            </div>
            
            <!-- åŠŸèƒ½è¯¦ç»†è¯´æ˜ -->
            <div class="entity-grid">
                <div class="entity-card">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">ğŸ‘¤ ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</h3>
                    <ul class="space-y-2">
                        <li>â€¢ <strong>User</strong>ï¼šæ ¸å¿ƒç”¨æˆ·å®ä½“</li>
                        <li>â€¢ åŒ…å«ä¸ªäººèµ„æ–™ã€è”ç³»æ–¹å¼</li>
                        <li>â€¢ ç¤¾äº¤è´¦å·å…³è”ä¿¡æ¯</li>
                        <li>â€¢ å…´è¶£çˆ±å¥½æ ‡ç­¾</li>
                        <li>â€¢ ç»Ÿè®¡ä¿¡æ¯å®æ—¶æ›´æ–°</li>
                    </ul>
                </div>
                
                <div class="entity-card">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">ğŸ¤ ç¤¾äº¤å…³ç³»</h3>
                    <ul class="space-y-2">
                        <li>â€¢ <strong>UserFollow</strong>ï¼šç”¨æˆ·å…³æ³¨å…³ç³»</li>
                        <li>â€¢ åŒå‘å…³æ³¨å…³ç³»ç®¡ç†</li>
                        <li>â€¢ å…³æ³¨/å–æ¶ˆå…³æ³¨åŠŸèƒ½</li>
                        <li>â€¢ ç²‰ä¸åˆ—è¡¨å’Œå…³æ³¨åˆ—è¡¨</li>
                        <li>â€¢ å…³æ³¨æ—¶é—´è®°å½•</li>
                    </ul>
                </div>
                
                <div class="entity-card">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">ğŸ  è´´å§å…³ç³»</h3>
                    <ul class="space-y-2">
                        <li>â€¢ <strong>TiebaMember</strong>ï¼šè´´å§æˆå‘˜å…³ç³»</li>
                        <li>â€¢ <strong>TiebaFollow</strong>ï¼šè´´å§å…³æ³¨å…³ç³»</li>
                        <li>â€¢ è§’è‰²æƒé™ç®¡ç†ï¼ˆæˆå‘˜/ç®¡ç†å‘˜/å§ä¸»ï¼‰</li>
                        <li>â€¢ ç­‰çº§å’Œç»éªŒå€¼ç³»ç»Ÿ</li>
                        <li>â€¢ æ´»è·ƒåº¦ç»Ÿè®¡</li>
                    </ul>
                </div>
                
                <div class="entity-card">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">ğŸ“Š å†…å®¹ç»Ÿè®¡</h3>
                    <ul class="space-y-2">
                        <li>â€¢ <strong>Post</strong>ï¼šå¸–å­å‘å¸ƒç»Ÿè®¡</li>
                        <li>â€¢ å¸–å­æµè§ˆã€ç‚¹èµã€è¯„è®ºç»Ÿè®¡</li>
                        <li>â€¢ ä¸ªäººå†…å®¹è´¡çŒ®åº¦åˆ†æ</li>
                        <li>â€¢ æ´»è·ƒåº¦æŒ‡æ ‡è®¡ç®—</li>
                        <li>â€¢ å½±å“åŠ›è¯„ä¼°</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            er: {
                useMaxWidth: true,
                diagramPadding: 20
            }
        });
    </script>
</body>
</html>